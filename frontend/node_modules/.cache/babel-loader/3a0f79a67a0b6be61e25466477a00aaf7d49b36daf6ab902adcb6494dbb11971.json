{"ast":null,"code":"import{createContext,useContext,useState,useEffect}from'react';import{useAuth}from'./AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";const OrderContext=/*#__PURE__*/createContext();export function OrderProvider(_ref){let{children}=_ref;const{user}=useAuth();const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{if(user){const fetchOrders=async()=>{try{const res=await fetch(`/api/users/${user.id}/orders`);const data=await res.json();setOrders(data);}catch(err){setError('Failed to load orders');}finally{setLoading(false);}};fetchOrders();}else{setLoading(false);}},[user]);const createOrder=async orderData=>{try{const res=await fetch('/api/orders',{method:'POST',body:JSON.stringify(orderData)});const newOrder=await res.json();setOrders(prev=>[newOrder,...prev]);// Optimistic update\nreturn newOrder;}catch(error){throw new Error('Order creation failed');}};const value={orders,loading,error,createOrder};return/*#__PURE__*/_jsx(OrderContext.Provider,{value:value,children:children});}export const useOrder=()=>{const context=useContext(OrderContext);if(!context)throw new Error('useOrder must be used within OrderProvider');return context;};","map":{"version":3,"names":["createContext","useContext","useState","useEffect","useAuth","jsx","_jsx","OrderContext","OrderProvider","_ref","children","user","orders","setOrders","loading","setLoading","error","setError","fetchOrders","res","fetch","id","data","json","err","createOrder","orderData","method","body","JSON","stringify","newOrder","prev","Error","value","Provider","useOrder","context"],"sources":["/workspace/frontend/src/context/core/OrderContext.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\n\nconst OrderContext = createContext();\n\nexport function OrderProvider({ children }) {\n  const { user } = useAuth();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (user) {\n      const fetchOrders = async () => {\n        try {\n          const res = await fetch(`/api/users/${user.id}/orders`);\n          const data = await res.json();\n          setOrders(data);\n        } catch (err) {\n          setError('Failed to load orders');\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchOrders();\n    } else {\n      setLoading(false);\n    }\n  }, [user]);\n\n  const createOrder = async (orderData) => {\n    try {\n      const res = await fetch('/api/orders', {\n        method: 'POST',\n        body: JSON.stringify(orderData)\n      });\n      const newOrder = await res.json();\n      setOrders(prev => [newOrder, ...prev]); // Optimistic update\n      return newOrder;\n    } catch (error) {\n      throw new Error('Order creation failed');\n    }\n  };\n\n  const value = {\n    orders,\n    loading,\n    error,\n    createOrder\n  };\n\n  return (\n    <OrderContext.Provider value={value}>\n      {children}\n    </OrderContext.Provider>\n  );\n}\n\nOrderProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nexport const useOrder = () => {\n  const context = useContext(OrderContext);\n  if (!context) throw new Error('useOrder must be used within OrderProvider');\n  return context;\n};\n"],"mappings":"AACA,OAASA,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACtE,OAASC,OAAO,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExC,KAAM,CAAAC,YAAY,cAAGP,aAAa,CAAC,CAAC,CAEpC,MAAO,SAAS,CAAAQ,aAAaA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACxC,KAAM,CAAEE,IAAK,CAAC,CAAGP,OAAO,CAAC,CAAC,CAC1B,KAAM,CAACQ,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd,GAAIQ,IAAI,CAAE,CACR,KAAM,CAAAO,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,cAAcT,IAAI,CAACU,EAAE,SAAS,CAAC,CACvD,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAH,GAAG,CAACI,IAAI,CAAC,CAAC,CAC7BV,SAAS,CAACS,IAAI,CAAC,CACjB,CAAE,MAAOE,GAAG,CAAE,CACZP,QAAQ,CAAC,uBAAuB,CAAC,CACnC,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CACDG,WAAW,CAAC,CAAC,CACf,CAAC,IAAM,CACLH,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACJ,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAc,WAAW,CAAG,KAAO,CAAAC,SAAS,EAAK,CACvC,GAAI,CACF,KAAM,CAAAP,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,aAAa,CAAE,CACrCO,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACJ,SAAS,CAChC,CAAC,CAAC,CACF,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAZ,GAAG,CAACI,IAAI,CAAC,CAAC,CACjCV,SAAS,CAACmB,IAAI,EAAI,CAACD,QAAQ,CAAE,GAAGC,IAAI,CAAC,CAAC,CAAE;AACxC,MAAO,CAAAD,QAAQ,CACjB,CAAE,MAAOf,KAAK,CAAE,CACd,KAAM,IAAI,CAAAiB,KAAK,CAAC,uBAAuB,CAAC,CAC1C,CACF,CAAC,CAED,KAAM,CAAAC,KAAK,CAAG,CACZtB,MAAM,CACNE,OAAO,CACPE,KAAK,CACLS,WACF,CAAC,CAED,mBACEnB,IAAA,CAACC,YAAY,CAAC4B,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAxB,QAAA,CACjCA,QAAQ,CACY,CAAC,CAE5B,CAMA,MAAO,MAAM,CAAA0B,QAAQ,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,OAAO,CAAGpC,UAAU,CAACM,YAAY,CAAC,CACxC,GAAI,CAAC8B,OAAO,CAAE,KAAM,IAAI,CAAAJ,KAAK,CAAC,4CAA4C,CAAC,CAC3E,MAAO,CAAAI,OAAO,CAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}