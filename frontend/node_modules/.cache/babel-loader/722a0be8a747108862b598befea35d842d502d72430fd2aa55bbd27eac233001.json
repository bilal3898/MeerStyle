{"ast":null,"code":"var _jsxFileName = \"/workspace/frontend/src/context/core/OrderContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport PropTypes from 'prop-types';\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderContext = /*#__PURE__*/createContext();\nexport function OrderProvider({\n  children\n}) {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (user) {\n      const fetchOrders = async () => {\n        try {\n          const res = await fetch(`/api/users/${user.id}/orders`);\n          const data = await res.json();\n          setOrders(data);\n        } catch (err) {\n          setError('Failed to load orders');\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchOrders();\n    } else {\n      setLoading(false);\n    }\n  }, [user]);\n  const createOrder = async orderData => {\n    try {\n      const res = await fetch('/api/orders', {\n        method: 'POST',\n        body: JSON.stringify(orderData)\n      });\n      const newOrder = await res.json();\n      setOrders(prev => [newOrder, ...prev]); // Optimistic update\n      return newOrder;\n    } catch (error) {\n      throw new Error('Order creation failed');\n    }\n  };\n  const value = {\n    orders,\n    loading,\n    error,\n    createOrder\n  };\n  return /*#__PURE__*/_jsxDEV(OrderContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(OrderProvider, \"e3Q6NPj8fUxeXiAUE8uJxbJEzPo=\", false, function () {\n  return [useAuth];\n});\n_c = OrderProvider;\nOrderProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport const useOrder = () => {\n  _s2();\n  const context = useContext(OrderContext);\n  if (!context) throw new Error('useOrder must be used within OrderProvider');\n  return context;\n};\n_s2(useOrder, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"OrderProvider\");","map":{"version":3,"names":["PropTypes","createContext","useContext","useState","useEffect","useAuth","jsxDEV","_jsxDEV","OrderContext","OrderProvider","children","_s","user","orders","setOrders","loading","setLoading","error","setError","fetchOrders","res","fetch","id","data","json","err","createOrder","orderData","method","body","JSON","stringify","newOrder","prev","Error","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","propTypes","node","isRequired","useOrder","_s2","context","$RefreshReg$"],"sources":["/workspace/frontend/src/context/core/OrderContext.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\n\nconst OrderContext = createContext();\n\nexport function OrderProvider({ children }) {\n  const { user } = useAuth();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (user) {\n      const fetchOrders = async () => {\n        try {\n          const res = await fetch(`/api/users/${user.id}/orders`);\n          const data = await res.json();\n          setOrders(data);\n        } catch (err) {\n          setError('Failed to load orders');\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchOrders();\n    } else {\n      setLoading(false);\n    }\n  }, [user]);\n\n  const createOrder = async (orderData) => {\n    try {\n      const res = await fetch('/api/orders', {\n        method: 'POST',\n        body: JSON.stringify(orderData)\n      });\n      const newOrder = await res.json();\n      setOrders(prev => [newOrder, ...prev]); // Optimistic update\n      return newOrder;\n    } catch (error) {\n      throw new Error('Order creation failed');\n    }\n  };\n\n  const value = {\n    orders,\n    loading,\n    error,\n    createOrder\n  };\n\n  return (\n    <OrderContext.Provider value={value}>\n      {children}\n    </OrderContext.Provider>\n  );\n}\n\nOrderProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nexport const useOrder = () => {\n  const context = useContext(OrderContext);\n  if (!context) throw new Error('useOrder must be used within OrderProvider');\n  return context;\n};\n"],"mappings":";;;AAAA,OAAOA,SAAS,MAAM,YAAY;AAClC,SAASC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACtE,SAASC,OAAO,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,YAAY,gBAAGP,aAAa,CAAC,CAAC;AAEpC,OAAO,SAASQ,aAAaA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAC1C,MAAM;IAAEC;EAAK,CAAC,GAAGP,OAAO,CAAC,CAAC;EAC1B,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACd,IAAIQ,IAAI,EAAE;MACR,MAAMO,WAAW,GAAG,MAAAA,CAAA,KAAY;QAC9B,IAAI;UACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,cAAcT,IAAI,CAACU,EAAE,SAAS,CAAC;UACvD,MAAMC,IAAI,GAAG,MAAMH,GAAG,CAACI,IAAI,CAAC,CAAC;UAC7BV,SAAS,CAACS,IAAI,CAAC;QACjB,CAAC,CAAC,OAAOE,GAAG,EAAE;UACZP,QAAQ,CAAC,uBAAuB,CAAC;QACnC,CAAC,SAAS;UACRF,UAAU,CAAC,KAAK,CAAC;QACnB;MACF,CAAC;MACDG,WAAW,CAAC,CAAC;IACf,CAAC,MAAM;MACLH,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,CAACJ,IAAI,CAAC,CAAC;EAEV,MAAMc,WAAW,GAAG,MAAOC,SAAS,IAAK;IACvC,IAAI;MACF,MAAMP,GAAG,GAAG,MAAMC,KAAK,CAAC,aAAa,EAAE;QACrCO,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,SAAS;MAChC,CAAC,CAAC;MACF,MAAMK,QAAQ,GAAG,MAAMZ,GAAG,CAACI,IAAI,CAAC,CAAC;MACjCV,SAAS,CAACmB,IAAI,IAAI,CAACD,QAAQ,EAAE,GAAGC,IAAI,CAAC,CAAC,CAAC,CAAC;MACxC,OAAOD,QAAQ;IACjB,CAAC,CAAC,OAAOf,KAAK,EAAE;MACd,MAAM,IAAIiB,KAAK,CAAC,uBAAuB,CAAC;IAC1C;EACF,CAAC;EAED,MAAMC,KAAK,GAAG;IACZtB,MAAM;IACNE,OAAO;IACPE,KAAK;IACLS;EACF,CAAC;EAED,oBACEnB,OAAA,CAACC,YAAY,CAAC4B,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAAzB,QAAA,EACjCA;EAAQ;IAAA2B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACY,CAAC;AAE5B;AAAC7B,EAAA,CAnDeF,aAAa;EAAA,QACVJ,OAAO;AAAA;AAAAoC,EAAA,GADVhC,aAAa;AAqD7BA,aAAa,CAACiC,SAAS,GAAG;EACxBhC,QAAQ,EAAEV,SAAS,CAAC2C,IAAI,CAACC;AAC3B,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,GAAA;EAC5B,MAAMC,OAAO,GAAG7C,UAAU,CAACM,YAAY,CAAC;EACxC,IAAI,CAACuC,OAAO,EAAE,MAAM,IAAIb,KAAK,CAAC,4CAA4C,CAAC;EAC3E,OAAOa,OAAO;AAChB,CAAC;AAACD,GAAA,CAJWD,QAAQ;AAAA,IAAAJ,EAAA;AAAAO,YAAA,CAAAP,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}